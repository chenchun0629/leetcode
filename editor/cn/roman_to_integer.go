package main

import (
	"fmt"
	"strings"
)

//ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚
//
// å­—ç¬¦          æ•°å€¼
//I             1
//V             5
//X             10
//L             50
//C             100
//D             500
//M             1000
//
// ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš XXVII, å³ä¸º XX + V + I
//I ã€‚
//
// é€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5
// å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š
//
//
// I å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚
// X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚
// C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚
//
//
// ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚è¾“å…¥ç¡®ä¿åœ¨ 1 åˆ° 3999 çš„èŒƒå›´å†…ã€‚
//
//
//
// ç¤ºä¾‹ 1:
//
// è¾“å…¥: "III"
//è¾“å‡º: 3
//
// ç¤ºä¾‹ 2:
//
// è¾“å…¥: "IV"
//è¾“å‡º: 4
//
// ç¤ºä¾‹ 3:
//
// è¾“å…¥: "IX"
//è¾“å‡º: 9
//
// ç¤ºä¾‹ 4:
//
// è¾“å…¥: "LVIII"
//è¾“å‡º: 58
//è§£é‡Š: L = 50, V= 5, III = 3.
//
//
// ç¤ºä¾‹ 5:
//
// è¾“å…¥: "MCMXCIV"
//è¾“å‡º: 1994
//è§£é‡Š: M = 1000, CM = 900, XC = 90, IV = 4.
//
//
//
// æç¤ºï¼š
//
//
// é¢˜ç›®æ‰€ç»™æµ‹è¯•ç”¨ä¾‹çš†ç¬¦åˆç½—é©¬æ•°å­—ä¹¦å†™è§„åˆ™ï¼Œä¸ä¼šå‡ºç°è·¨ä½ç­‰æƒ…å†µã€‚
// IC å’Œ IM è¿™æ ·çš„ä¾‹å­å¹¶ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ï¼Œ49 åº”è¯¥å†™ä½œ XLIXï¼Œ999 åº”è¯¥å†™ä½œ CMXCIX ã€‚
// å…³äºç½—é©¬æ•°å­—çš„è¯¦å°½ä¹¦å†™è§„åˆ™ï¼Œå¯ä»¥å‚è€ƒ ç½—é©¬æ•°å­— - Mathematics ã€‚
//
// Related Topics æ•°å­¦ å­—ç¬¦ä¸²
// ğŸ‘ 1119 ğŸ‘ 0

//leetcode submit region begin(Prohibit modification and deletion)
func romanToInt(s string) int {
	return romanToIntB(s)
}

// æ–¹æ¡ˆB
// æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ–°æ­Œè§„åˆ™
// å‰ä¸€ä¸ªæ•°å¤§äºåä¸€ä¸ªæ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‰ªæ‰åä¸€ä¸ªæ•°
// å‰ä¸€ä¸ªæ•°å°äºå¤§äºç­‰äºåä¸€ä¸ªæ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šåä¸€ä¸ªæ•°
// ä¾‹å¦‚ï¼šMCMXCIV => M > C < M > X < C > I < V
//                1000 - 100 + 1000 - 10 + 100 - 1 + 5 = 1994
func romanToIntB(s string) int {
	var (
		r    = []rune(s)
		l    = len(r)
		ret  int
		prev = m[string(r[0])]
	)

	for i := 1; i < l; i++ {
		var cur = m[string(r[i])]
		if prev >= cur {
			ret += prev
		} else {
			ret -= prev
		}
		prev = cur
	}

	ret += prev

	return ret
}

// æ–¹æ¡ˆA
// æ ¹æ®è§„åˆ™ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤
// 1ã€å¾ªç¯éå†å­—ç¬¦ä¸²ï¼Œ ç¡®å®šä¸€ä¸ªspan å¦‚ Xã€IVã€IXL ç­‰
// 2ã€è®¡ç®—spanç»“æœï¼Œ x => 10, IV => 4, IXL => 39
// 3ã€å°†æ‰€æœ‰spanåŠ åœ¨ä¸€èµ·å¾—åˆ°æœ€åç»“æœ
// ä¾‹å¦‚ï¼š MCMXCIV åˆ†ä¸º Mã€ CMã€ XCã€ IV 4ä¸ªspan
// æœ€åç»“æœä¸ºï¼š 1000 + (-100 + 1000) + (-10 + 1000) + (-1 + 5) = 1000 + 900 + 90 + 4 = 1994
func romanToIntA(s string) int {
	var (
		r   = []rune(s)
		l   = len(r)
		ret int
	)

	for i := 0; i < l; i++ {
		var (
			t = []rune{r[i]}
			c int
		)
		for i+c+1 < l {
			if strings.Contains(n[string(r[i])], string(r[i+c+1])) {
				t = append(t, r[i+c+1])
				c++
			} else {
				break
			}
		}
		i = i + c

		var lt = len(t)
		for j := 0; j < lt; j++ {
			if j+1 == lt {
				ret += m[string(t[j])]
			} else {
				ret -= m[string(t[j])]
			}
		}
	}

	return ret
}

var (
	m = map[string]int{
		"I": 1,
		"V": 5,
		"X": 10,
		"L": 50,
		"C": 100,
		"D": 500,
		"M": 1000,
	}
	n = map[string]string{
		"I": "VX",
		"V": "XL",
		"X": "LC",
		"L": "CD",
		"C": "DM",
		"D": "M",
	}
)

//leetcode submit region end(Prohibit modification and deletion)

func main() {
	fmt.Println(romanToInt("MCMXCIV"))
}
